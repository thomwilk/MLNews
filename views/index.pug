html(lang="en")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title News Nudge
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous")
    link(rel="icon" href="images/favicon.ico" type="image/x-icon")
  body 
    .container.mx-auto
      h1.display-4.fw-bold.mb-4.text-center News Nudge
      form.mb-4(method='post' action='/add-url').flex
        label.form-label.block.text-lg.fw-medium.mb-2(for='url') Enter URL:
         input#url.form-control.mb-2(style='width:500px;' type='url' name='url' required='')
        button.btn.btn-primary.ml-2.w-1(type='submit') Add URL
      #result
      table#urlTable.table.table-bordered
        thead
          tr
            th.py-2.px-4.border.border-dark.text-start.text-gray-600.text-uppercase.fw-semibold Title
            th.py-2.px-4.border.border-dark.text-start.text-gray-600.text-uppercase.fw-semibold Description
            th.py-2.px-4.border.border-dark.text-start.text-gray-600.text-uppercase.fw-semibold Facebook Link
        tbody#urlTableBody
  script(src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js")
  script(src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous")
  script.
    // Fetch all URLs from the server when the page loads
    window.onload = async function() {
    const response = await fetch('/all-urls');
    const urls = await response.json();
    const tbody = document.getElementById('urlTableBody');
    // Populate the table with the URL data
    urls.forEach(url => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
    <td class="py-2 px-4 border border-dark">${url.title}</td>
    <td class="py-2 px-4 border border-dark">${url.description}</td>
    <td class="py-2 px-4 border border-dark text-center" style="min-width:170px;">
      <a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://newsnudge.cyclic.app//${url._id}"><img src="images/fb_share.png"></a>
    </td>
    `;
    tbody.appendChild(tr);
    });
    };
